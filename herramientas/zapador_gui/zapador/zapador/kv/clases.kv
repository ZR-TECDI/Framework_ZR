#:kivy 1.11.1

#:import zapa zapador.zapadorapp
#:import toggleado zapador.metodos.toggleado
#:import mapa_custom zapador.metodos.mapa_custom
#:import cambiar_foto zapador.metodos.cambiar_foto
#:import Factory kivy.factory.Factory

<Contenido@GridLayout>:
    canvas:
        Color: 
            rgba: 0.20,0.18,0.18,1
        Rectangle:
            size:root.size
            pos:root.pos
    # cols:1
    rows:5
    rows_minimum:{0:40,1:40,2:40,3:40,4:200}
    size_hint_y:1
    padding:20
    spacing:10
<CampoTexto@GridLayout>:
    size_hint_y:0.2
    cols:2
    padding:1
<Etiqueta@Label>:
    size_hint_x:0.2
    multiline:False
    halign:'right'
    valign:'middle'
<EntradaTexto@TextInput>:
    halign:'center'
    valing:'middle'
    multiline:False

<ListaDrop@Spinner>:
    size_hint_x:0.5
    size_hint_y:0.2

<BTNueva@ToggleButton>:
    text:'Nueva'
    group:'paginas'
    state:'normal'
<BTImportar@ToggleButton>:
    text:'Importar'
    group:'paginas'
    state:'normal'
<BTOpciones@ToggleButton>:
    markup:True
    group:'paginas'
    text:'S'
    # text:'{}'.format(icon('icon-cog'))
    state:'normal'
    size_hint:0.15,0.8
<BaseTabs@GridLayout>:
    rows:1
    row_default_height:40
    row_force_default:True
    size_hint_y:0.1

<Tabs1@BaseTabs>:
    BTNueva:
        state:'down'
        on_state:toggleado(self)
    BTImportar:
        state:'normal'
        on_press:zapa.cambiar_pantalla('pantalla_importar')
    AnchorLayout:
        anchor_x:'right'
        BTOpciones:
            state:'normal'
            on_press:zapa.cambiar_pantalla('pantalla_opciones')
<Tabs2@BaseTabs>:
    BTNueva:
        state:'normal'
        on_press:zapa.cambiar_pantalla('pantalla_nueva')
    BTImportar:
        state:'down'
        on_state:toggleado(self)
    AnchorLayout:
        anchor_x:'right'
        BTOpciones:
            state:'normal'
            on_press:zapa.cambiar_pantalla('pantalla_opciones')
<Tabs3@BaseTabs>:
    BTNueva:
        state:'normal'
        on_press:zapa.cambiar_pantalla('pantalla_nueva')
    BTImportar:
        state:'normal'
        on_press:zapa.cambiar_pantalla('pantalla_importar')
    AnchorLayout:
        anchor_x:'right'
        BTOpciones:
            state:'down'
            on_state:toggleado(self)

<MapaCustom@Popup>:
    # auto_dismiss:False
    size_hint:.5,.5
    title:'Mapa personalizado'
    GridLayout:
        rows:3
        rows_minimum:{0:50,1:5,2:10}
        Label:
            text:'Si no estaba tu mapa en la lista, puedes escribir en este cuadro de texto el nombre código del mapa.\nSuele ser el nombre normal pero anteponiendo un ".",\npor ejemplo ".Altis".'
            text_size:self.width, None
            multiline:True
        TextInput:
            id:codigo_mapa
            text:'Ingresa el código de mapa...'
            multiline:False
        
        Button:
            text:'Aceptar'
            on_release: mapa_custom(codigo_mapa.text, root)


<Navegador>:
    size_hint: .95,.95
    on_open:lista_lugares.values=self.encontrar_lugares();lista_lugares.text=self.encontrar_lugares()[0]
    GridLayout:
        rows:3
        GridLayout:
            cols:2
            size_hint_y:.1
            Label:
                text:'Lugares: '
            Spinner:
                id:lista_lugares
                on_text:filechoose.path=self.text
        FileChooser:
            size_hint:.9,.9
            id:filechoose
            dirselect:True
            FileChooserListLayout:
        BoxLayout:
            size_hint:1,.1
            orientation:'horizontal'
            Button:
                text:'Abrir'
                on_release:root.boton_abrir(filechoose.selection)
            Button:
                text:'Cancelar'
                on_release:root.dismiss()

<FotoMision>:
    title:'Cambiar foto'
